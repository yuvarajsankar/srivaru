define("modules/clean/cloud_docs/new_file_popover",["require","exports","tslib","external/react","spectrum/icon_partners","spectrum/popover","modules/core/i18n","modules/clean/react/css"],function(e,t,n,r,o,a,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleNewFileSelection=function(e){e.handleClick()};var l=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return r.createElement(a.PopoverContentItem,{key:this.props.item.displayName,value:this.props.item,className:this.props.item.className},r.createElement("div",{className:"newfile-popover--item"},r.createElement(o.IconPartners,{name:this.props.item.iconName,width:"18px",height:"18px"}),r.createElement("div",{className:"newfile-popover--item-text"},this.props.item.displayName)))},t})(r.Component);t.NewFileTypeRow=l;var c=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return r.createElement(a.PopoverContent,{attachment:"right"},r.createElement("div",{className:"newfile-popover"},r.createElement("div",{className:"newfile-popover--title"},i._("Create in Microsoft Office Online")),this.props.items.map(function(e){return r.createElement(l,{item:e})})))},t})(r.Component),u=s(c,["/static/css/spectrum/index.web-vflBdlkSG.css","/static/css/cloud_docs/new_file_popover-vfl3FdeaZ.css"]);t.NewFilePopoverContent=u}),define("modules/clean/flux/flux_store",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(function(){function e(e){this._listeners=[],this._dispatcher=e,this._dispatchToken=this._dispatcher.register(this.__invokeOnDispatch.bind(this)),this.__hasChanged=!1}return e.prototype.teardown=function(){this._dispatcher.unregister(this._dispatchToken)},e.prototype.getDispatcher=function(){return this._dispatcher},e.prototype.getDispatchToken=function(){return this._dispatchToken},e.prototype.addListener=function(e){var t=this;return this._listeners.push(e),function(){return t._listeners=Array.from(t._listeners).filter(function(t){return t!==e})}},e.prototype.hasChanged=function(){return this.__hasChanged},e.prototype.__emitChange=function(){this.__hasChanged=!0},e.prototype.__invokeOnDispatch=function(e){if(this.__hasChanged=!1,this.__onDispatch(e),this.__hasChanged)return Array.from(this._listeners).map(function(e){return e()})},e})();t.FluxStore=n}),define("modules/clean/photos/thumb_loading/generic_thumb_store",["require","exports","modules/clean/photos/thumb_loading/http2_thumb_loader","modules/core/exception"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=(function(){function e(e,t){this.loaderBatches=!1,this.thumbUrlToData={},this.callbackByRequestId={},this.loaderBatches=!!t,this.thumbLoader=e?e:new n.Http2ThumbLoader}return e.prototype.is_batching=function(){return this.loaderBatches},e.prototype.bind_url=function(e,t){var n=this;if(r.assert(!!t.onSuccess,"missing onSuccess handler"),this.thumbUrlToData[e])return t.onRequest&&t.onRequest(!0),t.onSuccess(!0),null;var o=this.thumbLoader.get_request_id();this.callbackByRequestId[o]=t;var a=function(){var e=n.callbackByRequestId[o];e&&e.onRequest&&e.onRequest(!1)},i=function(t){n.thumbUrlToData[e]=t;var r=n.callbackByRequestId[o];r&&r.onSuccess(!1)},s=function(){var e=n.callbackByRequestId[o];e&&e.onError&&e.onError()},l=function(){return n.callbackByRequestId.hasOwnProperty(o)};return this.thumbLoader.load_image(e,o,a,i,s,l),o},e.prototype.unbind_url=function(e){e&&(delete this.callbackByRequestId[e],this.thumbLoader.cancel_thumb(e))},e.prototype.get_thumb=function(e){return this.thumbUrlToData[e]?this.thumbUrlToData[e]:null},e})();t.GenericThumbStore=o}),define("modules/clean/photos/thumb_loading/http2_thumb_loader",["require","exports","modules/clean/photos/thumb_loading/utils"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(function(){function e(){this.http2RequestId=0}return e.prototype.get_request_id=function(){return this.http2RequestId+=1,this.http2RequestId.toString()},e.prototype.load_image=function(e,t,r,o,a,i){r(),n.load_individual_image(e,1,o,a,i)},e.prototype.cancel_thumb=function(e){},e})();t.Http2ThumbLoader=r}),define("modules/clean/photos/thumb_loading/utils",["require","exports"],function(e,t){"use strict";function n(e,t,n,r,o){var a=new Image;a.onload=function(){return n(e)},a.onerror=function(){t>0&&o()?(t-=1,a.src=e):r()},a.src=e}Object.defineProperty(t,"__esModule",{value:!0}),t.load_individual_image=n}),define("modules/clean/react/app_actions_view",["require","exports","tslib","external/classnames","spectrum/button","spectrum/icon_action","spectrum/popover","spectrum/overflow_button","spectrum/tertiary_link","external/react","modules/clean/cloud_docs/new_file_popover","modules/clean/react/css","modules/clean/user_education/react/user_education_effect","modules/clean/user_education/user_education_client","modules/clean/react/file_uploader/upload_button","modules/clean/react/badge"],function(e,t,n,r,o,a,i,s,l,c,u,p,d,m,h,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var _=function(e){e.handleClick&&e.handleClick()};t.AppActionsPopover=function(e){var t=e.primaryMenuItem,n=e.secondaryMenuItems,r=e.popoverTriggerLabel,o=[];return t&&(o=t.subItems?o.concat(t.subItems):o.concat([t])),n&&(o=o.concat.apply(o,n.filter(function(e){return"action-create-file"!==e.className}))),o.length&&r?c.createElement(i.Popover,{onSelection:_},c.createElement(i.PopoverTrigger,null,c.createElement(s.OverflowButton,{tagName:"span","aria-label":r})),c.createElement(i.PopoverContent,{attachment:"right"},o.map(function(e){return c.createElement(i.PopoverContentItem,{key:e.displayName,value:e,className:e.className,disabled:e.disabled},e.iconName&&c.createElement(a.IconAction,{name:e.iconName,className:"popover-item-icon"}),e.displayName)}))):c.createElement("noscript",null)};var y=function(e,t,n){m.UEClient.sendEvent(e,t),n&&n()},v=function(e){var t=e.primaryMenuItem,n=e.headerText;if(t&&Object.keys(t).length>0){var s=r("primary-action-menu__button",t.className),l=s.indexOf("action-upload")>=0,u=!!t.subItems,p=c.createElement(d.UserEducationEffect,{containerName:"AppActionsView",name:"PrimaryButtonText",useSpan:!0},t.displayName),m=l?c.createElement(h.UploadButton,{className:s,disabled:t.disabled,handleClick:function(){y("AppActionsView","PrimaryButtonTextClicked",t.handleClick)},variant:"primary",tagName:u?"span":void 0},p):c.createElement(o.Button,{className:s,disabled:t.disabled,onClick:t.handleClick,variant:"primary",tagName:u?"span":void 0},p),f=u?c.createElement(i.Popover,{onSelection:_},c.createElement(i.PopoverTrigger,{disabled:t.disabled},m),c.createElement(i.PopoverContent,{className:"primary-action-menu__popover-menu"},t.subItems.map(function(e){return c.createElement(i.PopoverContentItem,{key:e.popoverMenuName,value:e,className:e.className,disabled:e.disabled},e.iconName&&c.createElement(a.IconAction,{name:e.iconName,className:"popover-item-icon"}),e.popoverMenuName)}))):m;return c.createElement("div",{className:"primary-action-menu"},c.createElement("span",{className:"primary-action-menu__header-text"},n),c.createElement("div",{className:"primary-action-menu__button-wrapper"},f))}return c.createElement("noscript",null)},b=function(e){var t=e.menuItem,o=t.disabled,a=t.displayName,s=t.handleClick,p=t.iconName,m=t.badge,_=t.subItems,v=r("secondary-action-menu__button",e.menuItem.className),b=v.indexOf("action-upload")>=0,g=c.createElement(d.UserEducationEffect,{containerName:"AppActionsView",name:"SecondaryActionMenu-text-"+p},a,m&&c.createElement(f.Badge,n.__assign({},m))),E=p;if(b)return c.createElement(h.UploadButton,{key:a,iconName:E,handleClick:function(){y("AppActionsView","SecondaryActionMenu-text-"+p+"-Clicked",s)},disabled:o,className:v,variant:"secondary"},g);var N=c.createElement(l.TertiaryLink,{key:a,icon:E,onClick:function(){y("AppActionsView","SecondaryActionMenu-text-"+p+"-Clicked",s)},disabled:o,className:v},g);if(_){var C=_.map(function(e){return{iconName:e.iconName,displayName:e.displayName,className:e.className,handleClick:e.handleClick}});return c.createElement(i.Popover,{onSelection:u.handleNewFileSelection},c.createElement(i.PopoverTrigger,{disabled:o,className:"newfile-popover--trigger"},N),c.createElement(u.NewFilePopoverContent,{items:C}))}return N},g=function(e){var t=e.secondaryMenuItems;return c.createElement(l.TertiaryList,{className:"secondary-action-menu"},t.map(function(e){return c.createElement(b,{key:e.displayName,menuItem:e})}))},E=(function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(r,e),r.prototype.componentDidMount=function(){this.props.handleComponentTTI("AppActionsView")},r.prototype.render=function(){var e=this.props,n=e.responsive,r=e.primaryMenuItem,o=e.primarySubnode,a=e.secondaryMenuItems,i=e.headerText,s=e.popoverTriggerLabel,l=!(!n||!n.isResponsive||n.isMatchedLarge);return c.createElement("div",{className:"appactions-menu"},l&&c.createElement("div",{className:"appactions-menu--popover"},r&&s&&c.createElement(t.AppActionsPopover,{primaryMenuItem:r,secondaryMenuItems:a,popoverTriggerLabel:s})),!l&&c.createElement("div",{className:"appactions-menu--buttons"},r&&c.createElement(v,{primaryMenuItem:r,headerText:i}),o,a&&c.createElement(g,{secondaryMenuItems:a})))},r.defaultProps={headerText:"",secondaryMenuItems:[],handleComponentTTI:function(){}},r})(c.PureComponent),N=p(E,["/static/css/spectrum/index.web-vflBdlkSG.css","/static/css/dropbox/app_actions-vflfwXvD7.css"]);t.AppActionsView=N}),define("modules/clean/react/file_uploader/file_uploader",["require","exports","tslib","external/react","modules/core/exception"],function(e,t,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=null,i=(function(t){function i(e){var n=t.call(this,e)||this;return n.handleAllFileUploadsComplete=function(e){e.find(function(e){return!!n.state.uploadErrorTypes&&e.errorType===n.state.uploadErrorTypes.OVER_QUOTA_ERROR})&&!n.isPaidTeamViewer()&&i.showModal("out-of-quota"),n.props.onAllFileUploadsComplete&&n.props.onAllFileUploadsComplete(e)},n.path=n.props.initialPath?n.props.initialPath:"/",n.hasPermissionToUploadToFolder=!!n.props.initialPermission,n.state={fileUploader:void 0,uploaderStore:void 0,uploaderActions:void 0,viewer:void 0,uploadErrorTypes:void 0},n.props.loadOnRender&&i.requireFileUploader({}),a?o.reportStack("Only one FileUploader component may be rendered to the page at any time.You have tried to instantiate multiple uploaders.",{severity:o.SEVERITY.CRITICAL}):a=n,n}return n.__extends(i,t),i.requireFileUploader=function(t){var n=t.modalType,r=t.handleUploadButtonClick,o=t.folderUpload,s=function(e,t,s,l,c){var u=e.FileUploader,p=t.uploaderStore,d=s.UploaderActions,m=l.Viewer,h=c.UploadErrorType;a&&(a.setAsyncRequiredUploaderModules(u,d,p,m,h),n&&i.showModal(n),r&&i.handleUploadButtonClick(!!o))};s.perfName="file_uploader",e(["modules/clean/react/file_uploader/uploader_new","modules/clean/react/file_uploader/store","modules/clean/react/file_uploader/actions","modules/clean/viewer","modules/clean/react/file_uploader/constants"],s)},i.prototype.setAsyncRequiredUploaderModules=function(e,t,n,r,o){this.setState({fileUploader:e,uploaderStore:n,uploaderActions:t,viewer:r,uploadErrorTypes:o}),this.props.needToSetStoreValues&&(void 0!==this.user&&t.setUser({user:this.user}),t.setPath({path:this.path,hasPermissionToUploadToFolder:this.hasPermissionToUploadToFolder}))},i.prototype.componentWillUnmount=function(){a=null},i.loadCoreComponent=function(){a&&a.state.fileUploader||(e.defined("modules/clean/react/file_uploader/uploader"),i.requireFileUploader({}))},i.isCoreComponentDefined=function(){return!!a&&!!a.state.fileUploader},i.setPathAndPermissions=function(e){a&&a.state.uploaderActions&&a.state.uploaderActions.setPath(e)},i.setPath=function(e){a&&(a.state.uploaderActions?a.state.uploaderActions.setPath({path:e}):(e||(e="/"),a.path=e))},i.setUser=function(e){a&&(a.state.uploaderActions?a.state.uploaderActions.setUser({user:e}):a.user=e?e:void 0)},i.showModal=function(e){a&&(a.refs.fileUploader?e&&"regular"!==e?"out-of-quota"===e?a.refs.fileUploader.showOOQModal():"team-onboarding"===e&&a.refs.fileUploader.showModalWithTeamOnboarding():a.refs.fileUploader.showModal():(e=e||"regular",i.requireFileUploader({modalType:e})))},i.handleUploadButtonClick=function(e){a&&(a.refs.fileUploader?a.refs.fileUploader.handleUploadButtonClick(e):i.requireFileUploader({handleUploadButtonClick:!0,folderUpload:e}))},i.isDraggingFilesHelper=function(e){if(!a)return!1;if(!a.state.uploaderStore)return!1;var t=a.state.uploaderStore;return!!t.numDraggingFiles()&&(e?t.isInternalTransfer():!t.isInternalTransfer())},i.isDraggingInternalFiles=function(){return i.isDraggingFilesHelper(!0)},i.isDraggingExternalFiles=function(){return i.isDraggingFilesHelper(!1)},i.isUploadModalOpen=function(){return!!a&&(!!a.state.uploaderStore&&a.state.uploaderStore.isUploadModalOpen())},i.prototype.isPaidTeamViewer=function(){return!(!this.user||!this.state.viewer||!this.user.is_team||this.state.viewer.get_viewer().team_is_limited)},i.prototype.render=function(){if(!this.state.fileUploader)return r.createElement("div",null);var e=this.props,t=e.browseViewType,n=e.isContentManager,o=e.ajaxInterceptor,a=e.onFileUploadComplete,i=e.onModalDismissed,s=e.dragAndDropEnabled,l=e.shouldShowDestinationLink,c=e.uploaderExperiments,u=e.uploaderPostTTIExperiments,p=e.chooseDestination,d=e.rootNSIDForCM,m=this.state.fileUploader;return r.createElement(m,{ref:"fileUploader",key:1,browseViewType:t,isContentManager:n,ajaxInterceptor:o,onFileUploadComplete:a,onAllFileUploadsComplete:this.handleAllFileUploadsComplete,onModalDismissed:i,dragAndDropEnabled:s,shouldShowDestinationLink:l,uploaderExperiments:c,uploaderPostTTIExperiments:u,chooseDestination:p,rootNSIDForCM:d})},i})(r.Component);t.FileUploaderController=i}),define("modules/clean/react/file_uploader/upload_button",["require","exports","tslib","spectrum/button","spectrum/tertiary_link","external/react"],function(e,t,n,r,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.renderPrimaryButton=function(){return a.createElement(r.Button,{className:this.props.className,disabled:this.props.disabled,onClick:this.props.handleClick,variant:"primary",tagName:this.props.tagName},this.props.children)},t.prototype.renderTertiaryLink=function(){return a.createElement(o.TertiaryLink,{icon:this.props.iconName,onClick:this.props.handleClick,disabled:this.props.disabled,className:this.props.className},this.props.children)},t.prototype.renderCMButton=function(){return a.createElement("button",{className:this.props.className,disabled:this.props.disabled,onClick:this.props.handleClick},this.props.children)},t.prototype.render=function(){return"primary"===this.props.variant?this.renderPrimaryButton():"CM"===this.props.variant?this.renderCMButton():this.renderTertiaryLink()},t})(a.PureComponent);t.UploadButton=i}),define("modules/clean/sharing/wizard/async_wizard_modals",["require","exports"],function(e,t){"use strict";function n(t){e(["modules/clean/sharing/wizard/wizard_modals"],t)}function r(e,t,r,o){n(function(n){n.shareExistingFolder(e,t,r,o)})}function o(e,t){n(function(n){var r=n.showShareAFolderWizardModal(e);t&&t(r)})}Object.defineProperty(t,"__esModule",{value:!0}),t.asyncShareExistingFolder=r,t.asyncShowShareAFolderWizardModal=o});
//# sourceMappingURL=pkg-browse-core.min.js-vfl_0dtif.map