define(["require","exports","modules/clean/react/file_sidebar/store/file_activity/selectors","modules/clean/react/file_sidebar/store/file_activity/api","modules/clean/react/file_sidebar/file_sidebar_logger"],function(e,t,i,n,r){"use strict";function a(e){return{type:"FILE_ACTIVITY|RECEIVE_STREAM_ERROR",error:e}}function c(e,t){return{type:"FILE_ACTIVITY|RECEIVE_FILE_ACTIVITY",activities:e,enabled:t}}function u(e,t){return{type:"FILE_ACTIVITY|LOADING_START",userId:e,file:t}}function o(e){return{type:"FILE_ACTIVITY|LOADING_END",state:e}}function f(){return{type:"FILE_ACTIVITY|RESET"}}function I(){return{type:"FILE_ACTIVITY|RESET_FILE_STATE"}}function l(){return{type:"FILE_ACTIVITY|FEEDBACK_SENT"}}function d(){return{type:"FILE_ACTIVITY|HIDE_FEEDBACK"}}function E(e,t){return(e.file?e.file.file_id:-1)!==(t.file?t.file.file_id:-1)||e.userId!==t.userId}function _(e,n){return function(f,l){if(E({file:n,userId:e},i.getContext(l()))){var d=t.api.create(e);f(I()),f(u(e,n));var _=Date.now(),s=++T,A=n.file_id;return d.getActivityStream(A).then(function(t){var a=t.enabled,u=t.activity_group;r.logGetActivityStreamTiming(Date.now()-_,!0),E({file:n,userId:e},i.getContext(l()))||f(c(u,a))}).catch(function(e){r.logGetActivityStreamTiming(Date.now()-_,!1),s===T&&f(a(e))}).then(function(){s===T&&f(o(i.getState(l())))})}}}function s(e,n,r,a){return function(c,u){var o=u(),f=i.getUserId(o);t.api.create(f).sendFeedback(e,n,r.id,a.id,r.file.ns_id,r.file.sjid),c(l()),setTimeout(function(){c(d())},5e3)}}Object.defineProperty(t,"__esModule",{value:!0});t.api={create:function(e){return new n.FileActivityStreamApi(e)}},t.receiveStreamError=a,t.receiveFileActivity=c,t.loadingStart=u,t.loadingEnd=o,t.reset=f,t.resetFileState=I,t.feedbackSent=l,t.hideFeedback=d;var T=0;t.getActivityStream=_,t.sendFeedback=s});
//# sourceMappingURL=actions.min.js-vfl2l0QQF.map