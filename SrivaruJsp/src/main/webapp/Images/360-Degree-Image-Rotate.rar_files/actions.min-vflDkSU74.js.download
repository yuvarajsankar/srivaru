define(["require","exports","tslib","external/react","modules/clean/downloads","modules/clean/multiaccount_login","modules/clean/react/copy_to_dropbox/modal","modules/clean/react/modal","modules/clean/react/share_download/api","modules/clean/sharing/signup_modal_proxy","modules/clean/viewer","modules/core/browser","modules/core/exception","modules/core/i18n","modules/core/notify","modules/clean/react/share_download/api"],function(e,o,r,n,s,t,a,l,i,u,c,d,_,m,p,f){"use strict";function w(e){return r.__awaiter(this,void 0,void 0,function(){var o,n,t,a,l;return r.__generator(this,function(r){switch(r.label){case 0:return o=e.downloadTestUrl,n=e.url,[4,u.signupModalProxy.signupForDirectDownload()];case 1:if(r.sent(),!o)return[3,5];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,i.testDownload(o)];case 3:return r.sent(),[3,5];case 4:return t=r.sent(),t instanceof f.TooLargeError?p.Notify.error(m._("The zip file is too large.")):p.Notify.error(m._("Failed to download zip file.")),[2];case 5:return r.trys.push([5,7,,8]),[4,i.fetchDownloadUrl(n)];case 6:return a=r.sent(),s.get({url:a}),[3,8];case 7:return l=r.sent(),p.Notify.error(m._("Failed to download.")),[3,8];case 8:return[2]}})})}function h(e,o,s,i){return r.__awaiter(this,void 0,void 0,function(){var m,p,f;return r.__generator(this,function(r){switch(r.label){case 0:return"anonymous"!==s?[3,2]:[4,u.signupModalProxy.signup()];case 1:return m=r.sent(),p=d.reload,[3,4];case 2:return m=i?i.id:-1,_.assert(m!==-1,"role isn't anonymous => user cannot be null or undefined!"),f=c.Viewer.get_viewer(),f.is_user_signed_in(i)?[3,4]:[4,new Promise(function(e){t.show_modal({role:s,on_success:e})})];case 3:r.sent(),r.label=4;case 4:return l.Modal.showInstance(n.createElement(a.CopyToDropboxModal,{shareToken:e,copyable:o,userId:m,role:s,onDismiss:p})),[2]}})})}Object.defineProperty(o,"__esModule",{value:!0}),o.direct=w,o.toDropbox=h});
//# sourceMappingURL=actions.min.js-vfl-P782S.map