define("modules/clean/react/outside_event",["require","exports","tslib","external/react","external/prop-types","external/lodash","modules/clean/react/util"],function(e,t,n,r,a,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r.createElement,l=function(e,t,l,u){var d=null!=e.displayName?e.displayName:"UnnamedComponent";return c=(function(r){function a(){var e=null!==r&&r.apply(this,arguments)||this;return e._handleOutsideEvent=function(t){return"function"==typeof e.props[u]?e.props[u](t):void 0},e._handleInsideEvent=function(t){return t.stopPropagation(),"function"==typeof t.nativeEvent.stopImmediatePropagation&&t.nativeEvent.stopImmediatePropagation(),"function"==typeof e.props[l]?e.props[l](t):void 0},e}return n.__extends(a,r),a.prototype.componentDidMount=function(){return document.addEventListener(t,this._handleOutsideEvent,!1)},a.prototype.componentWillUnmount=function(){return document.removeEventListener(t,this._handleOutsideEvent,!1)},a.prototype.render=function(){return i(e,s.mergeProps(o.omit(this.props,l,u,"children"),(t={},t[l]=this._handleInsideEvent,t)),this.props.children);var t},a})(r.Component),c.displayName="Outside"+t+"Handled"+d,c.propTypes=(p={},p[l]=a.func,p[u]=a.func,p),c;var c,p};t.addOutsideEventHandling=l;var u=l("div","click","onClick","onOutsideClick");t.OutsideClickHandler=u;var d=l("div","mousedown","onMouseDown","onOutsideMouseDown");t.OutsideMouseDownHandler=d}),define("modules/clean/react/path_breadcrumbs",["require","exports","tslib","external/classnames","external/react","spectrum/icon_arrow","spectrum/icon_content","spectrum/popover","modules/clean/em_string","modules/clean/filepath","modules/core/i18n","modules/clean/user_education/react/user_education_effect","modules/clean/user_education/user_education_client","modules/clean/react/icon/icon_helper","modules/clean/react/title_bubble"],function(e,t,n,r,a,o,s,i,l,u,d,c,p,g,m){"use strict";function h(e,t){return 20-(t?2.625:new l.Emstring(e).length)}function f(e,t,n,r){for(var a=e.split("/").filter(Boolean),o=[{path:"",icon:"folder_dropbox-small",folderName:t,alt:n}],s=g.spectrum_folder_icon({size:g.ICON_SIZES.SMALL}),i=0;i<a.length;i++)e="/"+a.slice(0,i+1).join("/"),o.push({path:e,folderName:u.filename(e),icon:s,alt:d._("Folder")});if(o.length<3)return{dropdownCrumbs:[],inlineCrumbs:o,root:o[0]};for(var c=o[0]&&o[0].folderName||"",p=h(c,!1),m=o.map(function(e){return new l.Emstring(e.folderName||"").length}),f=1,b=m[o.length-1],i=o.length-2;i>=1&&(b+=1.64,b+=m[i],!(b>p));i--)f+=1;o.length===f+1&&(f+=1),1===f&&r===E.SMALL&&f++;var v=o.length-f;return{dropdownCrumbs:o.slice(0,v),inlineCrumbs:o.slice(v),root:o[0]}}function b(e){switch(e){case E.LARGE:return"right";case E.SMALL:return"right-small"}}Object.defineProperty(t,"__esModule",{value:!0});t.generateBreadcrumbData=f;var E;(function(e){e.LARGE="LARGE",e.SMALL="SMALL"})(E=t.PathBreadcrumbsSize||(t.PathBreadcrumbsSize={}));var v=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=this.props.path,t=this.props,o=t.firstBreadcrumbName,s=t.firstBreadcrumbAlt,i=t.isDraggingInternalFiles,l=t.shouldHighlightDropTargets,p=t.setFileUploaderPath,g=t.getUrlForPath,m=t.setUrl,b=t.size,v=t.disableDragging,_=f(e,o,s,b),C=_.dropdownCrumbs,N=_.inlineCrumbs,L=_.root,M=h(L&&L.folderName||"",C.length>0),P=r({"brws-path-breadrumbs":!0,"brws-path-breadrumbs--small":this.props.size===E.SMALL}),S="page-header-text u-l-fl";return N.length>1||C.length>0?a.createElement("span",{className:P},a.createElement("h1",{className:"ax-visually-hidden"},u.filename(e)),a.createElement("nav",{className:S,id:"path-breadcrumbs","aria-label":d._("Folder hierarchy"),role:"navigation"},C.length>0&&a.createElement(O,{crumbs:C,currentPath:e,isDraggingInternalFiles:i,shouldHighlightDropTargets:l,setFileUploaderPath:p,setUrl:m,size:b,disableDragging:v}),N.map(function(t,r){return a.createElement(D,n.__assign({},t,{key:encodeURI(t.path),isOnlyCrumb:0===r&&1===N.length&&0===C.length,index:r,isLastCrumb:r===N.length-1,maxWidth:M,currentPath:e,isDraggingInternalFiles:i,isHighlightedDropTarget:l,setFileUploaderPath:p,getUrlForPath:g,setUrl:m,size:b,disableDragging:v}))}))):a.createElement("span",{className:P},a.createElement("h1",{className:S},a.createElement(c.UserEducationEffect,{containerName:"PathBreadcrumbs",name:"HomeTitle",useSpan:!0},o)))},t.defaultProps={path:"/",isDraggingInternalFiles:!1,shouldHighlightDropTargets:!1,setFileUploaderPath:function(){},size:E.LARGE,disableDragging:!1},t})(a.PureComponent);t.PathBreadcrumbs=v;var D=(function(e){function t(t){var n=e.call(this,t)||this;return n.onDragEnterBreadcrumb=function(e){e.preventDefault(),e.target!==n.lastEnteredElement&&(n.props.disableDragging||(n.lastEnteredElement=e.target,n.dragEnterCount+=1,n.setState({isDraggedOver:!0}),n.props.isLastCrumb||n.props.setFileUploaderPath({path:n.props.path})))},n.onDragLeaveBreadcrumb=function(e){e.preventDefault(),n.props.disableDragging||(n.lastEnteredElement=null,n.dragEnterCount-=1,n.dragEnterCount<1&&(n.dragEnterCount=0,n.state.isDraggedOver&&(n.props.setFileUploaderPath({path:n.props.currentPath}),n.setState({isDraggedOver:!1}))))},n.onDropBreadcrumb=function(){n.setState({isDraggedOver:!1})},n.onDragOverBreadcrumb=function(e){e.preventDefault(),e.stopPropagation()},n.handleMouseEnter=function(){n.props.isDraggingInternalFiles&&n.setState({isDraggedOver:!0})},n.handleMouseLeave=function(){n.state.isDraggedOver&&n.setState({isDraggedOver:!1})},n.handleMouseUp=function(){n.state.isDraggedOver&&n.setState({isDraggedOver:!1})},n.navigateToFolder=function(e){var t=n.props.path;p.UEClient.sendEvent("BreadCrumbSegment","linkClicked",{path:t}),e.preventDefault(),n.props.setUrl({path:t})},n.eventHandlers={onDragEnter:n.onDragEnterBreadcrumb,onDragLeave:n.onDragLeaveBreadcrumb,onDrop:n.onDropBreadcrumb,onDragOver:n.onDragOverBreadcrumb,onMouseEnter:n.handleMouseEnter,onMouseLeave:n.handleMouseLeave,onMouseUp:n.handleMouseUp},n.state={isDraggedOver:!1},n}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.dragEnterCount=0,this.lastEnteredElement=null},t.prototype.render=function(){var e,t=this.props,s=t.getUrlForPath,i=t.path,u=t.index,d=t.isOnlyCrumb,p=t.maxWidth,g=t.isLastCrumb,h=t.isHighlightedDropTarget,f=t.size,E=d?this.props.folderName:l.Emstring.em_snippet(this.props.folderName,p),v={"breadcrumb-segment":!0,"breadcrumb-segment--is-drop-target":!g&&h,"breadcrumb-segment--file-dragged-over":!g&&this.state.isDraggedOver},D=b(f);return e=g?a.createElement("span",n.__assign({},this.eventHandlers),E):a.createElement("span",n.__assign({className:"breadcrumb-segment__wrapper"},this.eventHandlers),a.createElement(c.UserEducationEffect,{containerName:"BreadCrumbSegment",name:"link-"+u,useSpan:!0},a.createElement("a",{href:s(i).toString(),onClick:this.navigateToFolder,className:r(v)},E)),a.createElement(o.IconArrow,{name:D})),this.props.folderName!==E?a.createElement(m.TitleBubble,{content:this.props.folderName,position:m.TitleBubble.POSITIONS.BOTTOM,className:"list-label__title-bubble"},e):e},t.defaultProps={isOnlyCrumb:!1,isDraggingInternalFiles:!1,isHighlightedDropTarget:!1,disableDragging:!1},t})(a.Component),_=(function(e){function t(t){var n=e.call(this,t)||this;return n.onDragEnter=function(e){e.preventDefault(),e.target!==n.lastEnteredElement&&(n.props.disableDragging||(n.lastEnteredElement=e.target,n.dragEnterCount+=1,n.setState({isDraggedOver:!0}),n.props.setFileUploaderPath({path:n.props.path})))},n.onDragLeave=function(e){e.preventDefault(),n.props.disableDragging||(n.lastEnteredElement=null,n.dragEnterCount-=1,n.dragEnterCount<1&&(n.dragEnterCount=0,n.state.isDraggedOver&&(n.props.setFileUploaderPath({path:n.props.currentPath}),n.setState({isDraggedOver:!1}))))},n.onDrop=function(e){n.setState({isDraggedOver:!1}),n.dragEnterCount=0,n.props.closeFunc()},n.onDragOver=function(e){e.preventDefault(),e.stopPropagation()},n.handleMouseEnter=function(){n.props.isDraggingInternalFiles&&n.setState({isDraggedOver:!0})},n.handleMouseLeave=function(){n.state.isDraggedOver&&(n.setState({isDraggedOver:!1}),n.props.closeFunc())},n.handleMouseUp=function(){n.state.isDraggedOver&&n.setState({isDraggedOver:!1}),n.props.isDraggingInternalFiles&&!n.props.isLastCrumb&&n.props.closeFunc()},n.state={isDraggedOver:!1},n}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.dragEnterCount=0,this.lastEnteredElement=null},t.prototype.render=function(){var e=this.props,t=e.icon,o=e.alt,l=e.folderName,u={"breadcrumb-menu-item":!0,"breadcrumb-menu-item--is-drop-target":this.props.isHighlightedDropTarget,"breadcrumb-menu-item--file-dragged-over":this.state.isDraggedOver},d=a.createElement("span",{title:l,className:"breadcrumb-menu-item-wrapper"},a.createElement("span",{className:"breadcrumb-menu-item-icon"},a.createElement(s.IconContent,{name:t,alt:o})),a.createElement("span",{className:"breadcrumb-menu-item-text"},l));return a.createElement(i.PopoverContentItem,n.__assign({value:this.props.path,className:r(u)},{onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.onDrop,onDragOver:this.onDragOver,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:this.handleMouseUp}),d)},t.defaultProps={isHighlightedDropTarget:!1,closeFunc:function(){},alt:"",isDraggingInternalFiles:!1,disableDragging:!1},t})(a.Component),O=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={menuVisible:!1},t.onDragEnter=function(e){t.props.disableDragging||(e.preventDefault(),t.setState({menuVisible:!0}))},t.onInnerDragEnter=function(e){e.preventDefault(),t.dragEnterCount++},t.onDragLeave=function(e){e.preventDefault(),t.dragEnterCount--,t.dragEnterCount<1&&(t.dragEnterCount=0,t.state.menuVisible&&t.setState({menuVisible:!1}))},t.onMouseEnter=function(e){t.props.disableDragging||t.props.isDraggingInternalFiles&&!t.props.disableDragging&&(e.preventDefault(),t.setState({menuVisible:!0}))},t.onCrumbSelected=function(e){t.props.setUrl({path:e})},t.onPopoverToggle=function(e){var n=e.isOpen;t.setState({menuVisible:n})},t.onClose=function(){t.dragEnterCount=0,t.onPopoverToggle({isOpen:!1})},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.dragEnterCount=0},t.prototype.render=function(){var e=this,t=this.props.crumbs.slice().reverse(),n=this.props,r=n.currentPath,l=n.shouldHighlightDropTargets,u=n.isDraggingInternalFiles,c=n.setFileUploaderPath,p=n.size,g=n.disableDragging,m=d._("Show parent folders (descending)"),h=a.createElement(s.IconContent,{name:"folder_dropdown-small",alt:m,className:"breadcrumb-menu-icon"}),f=b(p);return a.createElement(i.Popover,{onSelection:this.onCrumbSelected,onMenuToggle:this.onPopoverToggle,className:"breadcrumb-dropdown-container"},a.createElement(i.PopoverTrigger,{onDragOver:this.onDragEnter,onMouseEnter:this.onMouseEnter},a.createElement("button",{className:"u-unbutton breadcrumb-overflow-button u-l-fl"},h)),a.createElement(i.PopoverContent,{isRevealed:this.state.menuVisible,onDragEnter:this.onInnerDragEnter,onDragLeave:this.onDragLeave},t.map(function(t){return a.createElement(_,{key:encodeURI(t.path),path:t.path,icon:t.icon,alt:t.alt,folderName:t.folderName,currentPath:r,isHighlightedDropTarget:l,isDraggingInternalFiles:u,setFileUploaderPath:c,closeFunc:e.onClose,disableDragging:g})})),a.createElement(o.IconArrow,{name:f,className:"breadcrumb__spacer"}))},t.defaultProps={shouldHighlightDropTargets:!1,isDraggingInternalFiles:!1,disableDragging:!1},t})(a.Component)}),define("modules/clean/react/selection",["require","exports","tslib","external/immutable"],function(e,t,n,r){"use strict";function a(e,t){return new o({selected:e?r.OrderedSet(e):r.OrderedSet(),anchor:t||(e?e[0]:null)})}Object.defineProperty(t,"__esModule",{value:!0});var o=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t})(r.Record({selected:null,anchor:null},"Selection"));t.Selection=o,t.createSelection=a}),define("modules/clean/sharing/gating_util",["require","exports","modules/constants/sharing"],function(e,t,n){"use strict";function r(e){return n.TRUELINK.NO_COMMENT_ENABLED&&!!(null!=e?n.TRUELINK.NO_COMMENT_ENABLED[e.id]:void 0)}Object.defineProperty(t,"__esModule",{value:!0}),t.GoldenGate={hasNewOwnershipModel:function(e){return Boolean(n.GOLDEN_GATE.HAS_NEW_OWNERSHIP_MODEL[e])},hasContentManagerAndSuperAdmin:function(e){return Boolean(n.GOLDEN_GATE.HAS_CONTENT_MANAGER_AND_SUPER_ADMIN[e])},hasContentManagerCdm:function(e){return Boolean(n.GOLDEN_GATE.HAS_CONTENT_MANAGER_CDM[e])},hasContentManagerFolderRestore:function(e){return Boolean(n.GOLDEN_GATE.CAN_RESTORE_FOLDERS_IN_CM[e])},SHARING_TOTAL_LIMIT:n.GOLDEN_GATE.SHARING_TOTAL_LIMIT},t.isUserNoCommentEnabled=r}),define("modules/clean/sharing/public_folder/public_folder",["require","exports","modules/core/uri","modules/constants/public_folder_constants"],function(e,t,n,r){"use strict";function a(e,t){if(e.publicAppToken)return t;if(!e.isPublicFolderEnabled)return null;var n=(e.publicFolderFqPath||"/public").toLowerCase(),r=t.toLowerCase();return r===n?"/":r.startsWith(n+"/")?t.substring(n.length):null}function o(e,t){return null!=a(e,t)}function s(e,t,o,s){if(s)return null;var i,l=a(t,o);if(i=r.SHOULD_REDIRECT_URL?"u"+e+".dl.dropboxusercontent.com":"dl.dropboxusercontent.com",null!=l){var u=new n.URI({scheme:"https",authority:i});return t.publicAppToken?(u.setPath("/spa/"+t.publicAppToken+l+"/data"),u.toString()):(u.setPath("/u/"+e+l),u.toString())}return null}function i(t){return new Promise(function(n,r){e(["external/react","modules/clean/react/modal","modules/clean/sharing/public_folder/modal"],function(e,r,a){var o=r.Modal,s=a.CopyPublicLinkModal;o.showInstance(e.createElement(s,{publicLink:t})),n()})})}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUsePublicFolderSharing=o,t.makePublicFolderLink=s,t.showPublicFolderLinkModal=i});
//# sourceMappingURL=pkg-browse-and-photos.min.js-vfl6mV_vs.map