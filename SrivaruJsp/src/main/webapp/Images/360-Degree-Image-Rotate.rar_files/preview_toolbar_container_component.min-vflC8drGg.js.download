define(["require","exports","tslib","external/classnames","external/react","external/react-redux","modules/clean/annotations/preview_image_annotations_toolbar","modules/clean/comments/action_creators","modules/clean/comments/logging","modules/clean/comments/store","modules/clean/comments/utils","modules/clean/comments/constants","modules/clean/react/previews/preview_toolbar","modules/clean/react/previews/preview_toolbar_region_creation","modules/clean/previews/preview_toolbar_store","modules/clean/react/file_viewer/sidebar_helpers"],function(e,o,n,t,i,r,a,s,l,c,p,b,u,d,C,g){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var v=(function(e){function o(){var o=null!==e&&e.apply(this,arguments)||this;return o.getComponentState=function(){return{canAnnotate:p.canAnnotate(o.props.isFullscreen),regionCreationEnabled:c.state.regionCreationEnabled,hideToolbar:C.PreviewToolbarStore.state.hideToolbar}},o.state=o.getComponentState(),o.onStateChange=function(){return o.setState(o.getComponentState())},o.logRegionCreationClick=function(e){l.logEvent(e,b.FileActivityLogClientOriginType.ANNOTATION_MODE_BUTTON_IN_TOOLBAR)},o.onRegionCreationClick=function(){o.logRegionCreationClick(b.FileActivityLogEventType.CLIENT_ANNOTATION_MODE_ENABLED),s.setRegionCreationEnabled(!0)},o.onRegionCreationDoneClick=function(){o.logRegionCreationClick(b.FileActivityLogEventType.CLIENT_ANNOTATION_MODE_DISABLED),s.setRegionCreationEnabled(!1)},o.onSidebarOpen=function(e){var n=o.props;(0,n.onSidebarOpen)(n.previewToolbarProps.docType,e)},o.onSidebarClose=function(e){var n=o.props;(0,n.onSidebarClose)(n.previewToolbarProps.docType,e)},o}return n.__extends(o,e),o.prototype.componentDidMount=function(){this.unsubscribeCommentsStore=c.listen(this.onStateChange),this.unsubscribePreviewToolbarStore=C.PreviewToolbarStore.listen(this.onStateChange)},o.prototype.componentWillUnmount=function(){this.unsubscribeCommentsStore(),this.unsubscribePreviewToolbarStore(),this.state.regionCreationEnabled&&s.setRegionCreationEnabled(!1)},o.prototype.render=function(){var e=this.props.previewToolbarProps,o=this.state.regionCreationEnabled&&this.state.canAnnotate,r=this.state.canAnnotate&&!this.props.forceDisableRegionAnnotation,s=null;if(this.props.shouldUseImageToolbar)o||(s=i.createElement(a.PreviewImageAnnotationsToolbar,n.__assign({},e,{ref:"previewToolbar",onRegionCreationClick:this.onRegionCreationClick,canEnableRegionCreation:r})));else{var l=!!e.isHidden||o||this.state.hideToolbar;s=i.createElement(u.PreviewToolbar,n.__assign({},e,{isSidebarOpen:this.props.isSidebarOpen,onSidebarOpen:this.onSidebarOpen,onSidebarClose:this.onSidebarClose,ref:"previewToolbar",onRegionCreationClick:this.onRegionCreationClick,isHidden:l,shouldDisplayRegionCreationButton:r}))}var c=null;o&&(c=i.createElement(d.PreviewToolbarRegionCreation,{onRegionCreationDoneClick:this.onRegionCreationDoneClick}));var p=t("preview-toolbar-container",{"preview-toolbar-container--elevated":!!this.props.elevateToolbar});return i.createElement("div",{className:p},s,c)},o})(i.Component);o.PreviewToolbarContainerInternal=v,o.PreviewToolbarContainer=r.connect(void 0,g.mapDispatchToProps,void 0,{withRef:!0})(v)});
//# sourceMappingURL=preview_toolbar_container_component.min.js-vfl-kWsuY.map