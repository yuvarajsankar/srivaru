define("modules/clean/legacy_pyxl_controllers/tooltip",["require","exports","tslib","external/lodash","modules/core/controller_helpers","modules/clean/analytics","jquery"],function(t,o,e,i,n,r){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var s=[],a=(function(){function t(t,o,e,r,s){this.$wrapper=t,this.prompt=this.$wrapper.find(".tooltip-prompt"),this.tooltip=this.$wrapper.find(".tooltip-tooltip"),this.hover_target=this.find_hover_target(),this.hover_log_event_name=s,this.position_global=o,this.tooltip_location=e,this.listen();var a=n.clone_element(this.tooltip).appendTo("body");a.css({position:"static",display:"inline-block"});var l=r||500,u=a.width()+1;if(u>l&&(u=l),this.tooltip.css({width:u,position:"absolute",display:"none"}),a.remove(),this.position_global&&this.tooltip.remove().appendTo("body"),this.is_focusable()){var c=i.uniqueId("tooltip-tooltip-");this.tooltip.attr({role:"tooltip",id:c}),this.hover_target.attr({tabindex:0,"aria-describedby":c})}}return t.initClass=function(){this.prototype.tooltip_shown=!1,this.prototype.position_global=!1},t.prototype.listen=function(){var t=this;return(function(){for(var o=[],e=0,i=[t.hover_target,t.tooltip];e<i.length;e++){var n=i[e];n.mouseenter(function(){return clearTimeout(t.tooltip.data("timeout_id")),t.show_tooltip()}),n.mouseleave(function(){var o=setTimeout(function(){return t.hide_tooltip()},200);return t.tooltip.data("timeout_id",o)}),t.is_focusable()?(n.focusin(function(){return clearTimeout(t.tooltip.data("timeout_id")),t.show_tooltip()}),o.push(n.focusout(function(){var o=setTimeout(function(){return t.hide_tooltip()},200);return t.tooltip.data("timeout_id",o)}))):o.push(void 0)}return o})()},t.prototype.find_hover_target=function(){return this.prompt},t.prototype.is_focusable=function(){return!1},t.prototype.show_tooltip=function(t){var o,e,i,n;if(!this.tooltip_shown){i=this.position_global?this.hover_target.offset():this.hover_target.position();for(var a=0,l=Array.from(s);a<l.length;a++){l[a].hide_tooltip()}return s.push(this),"top"===this.tooltip_location?(n=i.top-this.tooltip.outerHeight()-this.hover_target.height()/2,e=i.left-this.tooltip.outerWidth()/2,o={top:"-=7"}):"left"===this.tooltip_location?(n=i.top-this.tooltip.outerHeight()/2+this.hover_target.outerHeight()/2,e=i.left-this.tooltip.outerWidth()-2,o={left:"-=7"}):"bottom"===this.tooltip_location?(n=i.top+this.hover_target.outerHeight(),e=i.left-this.tooltip.outerWidth()/2+this.hover_target.outerWidth()/2,o={top:"+=7"}):(n=i.top-this.tooltip.outerHeight()/2+this.hover_target.outerHeight()/2,e=i.left+this.hover_target.width()+2,o={left:"+=7"}),this.tooltip.css({top:n,left:e}).show().animate(o,50),this.hover_log_event_name&&r.TeamsWebActionsLogger.log(this.hover_log_event_name),this.tooltip_shown=!0}},t.prototype.hide_tooltip=function(){if(this.tooltip_shown){clearTimeout(this.tooltip.data("timeout_id")),this.tooltip.hide(),this.tooltip_shown=!1;var t=s.indexOf(this);return t!==-1?s.splice(t,1):void 0}},t})();o.DBTooltip=a,a.initClass();var l=(function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return e.__extends(o,t),o.prototype.find_hover_target=function(){return this.prompt.find(".sprite")},o.prototype.is_focusable=function(){return!0},o})(a);o.InfoTooltip=l}),define("modules/clean/legacy_ui_button",["require","exports","jquery"],function(t,o,e){"use strict";return function(){var t=e(document);return e(document).on("mouseover.ui-button",".ui-button",function(){return e(this).addClass("over")}).on("mouseout.ui-button",".ui-button",function(){return e(this).removeClass("over")}).on("mousedown.ui-button",".ui-button",function(){return e(this).addClass("down")}).on("click.ui-button",".ui-button",function(){var o=e(this);return o.hasClass("ui-button-dropdown")&&(o.hasClass("active")?t.trigger("dropdownClosed",[1]):t.trigger("dropdownOpened",[1])),o.toggleClass("active")}),t.on("click.ui-button",function(o){var i=e(o.target),n=i.closest(".ui-button.active"),r=0;e(".ui-button.active").not(n).each(function(){var t=e(this);t.hasClass("active")&&t.hasClass("ui-button-dropdown")&&(r+=1),t.removeClass("active")}),t.trigger("dropdownClosed",[r])}).on("mouseup.ui-button",function(){return e(".ui-button.down").removeClass("down")})}}),define("modules/clean/marketing_tracker",["require","exports","modules/core/exception"],function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=(function(){function t(){var o=this;this.push=function(i){var n=i.dataLayer;o.src=i.src,e.assert(!!o.src,"MarketingTracker.push requires src"),t.el||(t.el=o.load(o.src)),!t.ready&&t.el?t.el.addEventListener("load",function(){if(t.ready=!0,t&&t.el&&t.el.contentWindow)return t.el.contentWindow.postMessage(n,"https://marketing.dropbox.com")}):t.el&&t.el.contentWindow&&t.el.contentWindow.postMessage(n,"https://marketing.dropbox.com")},this.load=function(t){var o=document.createElement("iframe");return o.style.display="none",o.hidden=!0,o.src=t,o.setAttribute("sandbox","allow-scripts allow-same-origin"),document.body.appendChild(o),o},t.el=null,t.ready=!1}return t.ready=!1,t})();o.MarketingTracker=new i}),define("modules/clean/photos/legacy_thumb_loader",["require","exports","jquery","modules/clean/photos/batch_thumb_loader","modules/clean/sprite"],function(t,o,e,i,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.LegacyBatchThumbLoader={MAX_THUMB_BATCH_REQUESTS:24,batch_load_thumbs:function(t,o,r,s){for(var a=e.grep(t,function(t){return e(t).data("src")}),l={},u=0,c=a;u<c.length;u++){var h=c[u],p=String(e(h).data("src"));l[p]||(l[p]=[]),l[p].push(h)}this.instance?this.instance.reset({batch_size:o,batch_logger:s}):this.instance=new i.BatchThumbLoader({batch_size:o,max_parallel_requests:this.MAX_THUMB_BATCH_REQUESTS,on_batch:function(t){for(var o=0,i=t;o<i.length;o++){var n=i[o],r=[],s=e(l[n]);s.data("src",null),r.push(s.data("loading-src",n))}},batch_logger:s});for(var d=0,f=a;d<f.length;d++){var _=f[d],v=e(_),g=v.data("src");this.instance.queue_thumb(g,function(t,o,e,i){if(i||o.data("loading-src")){if(o.data("loading-src",null),0===e.indexOf("data:image"))return o.attr("src",e),"function"==typeof r?r(o[0]):void 0;o.error(function(){return o.attr("src",o.data("fail-src")||n.SPACER)}),o.load(function(){return"function"==typeof r?r(o[0]):void 0}),o.attr("src",e)}}.bind(this,g,v))}return this.instance.flush(),a.length},clear_all_pending_batches:function(){this.instance&&this.instance.clear()}}}),define("modules/clean/shared_link_error",["require","exports","jquery","modules/clean/ajax"],function(t,o,e,i){"use strict";var n;return n=(function(){var t=void 0;return n=(function(){function o(){e("#broken-share-article").on("click",function(){return i.WebRequest({url:"/shared_link_error_log",data:{evt:t}})})}return o.initClass=function(){t="click-sharing-article"},o})(),n.initClass(),n})()}),define("modules/clean/upsell/header_bubble_or_link",["require","exports","tslib","modules/clean/header_bubble","modules/clean/upsell/exception","modules/clean/upsell/upsell_controller"],function(t,o,e,i,n,r){"use strict";return(function(t){function o(o,e){var i=this;try{new r(o.find(".confirm-button"),o.find(".dismiss-button"),e).log_impression(),i=t.call(this,o,e)||this}catch(t){n.reportJsControllerException({err:t,js_controller_options:e})}return i.$el=o,i}return e.__extends(o,t),o})(i)});
//# sourceMappingURL=pkg-legacy-ab.min.js-vfl20uzBV.map